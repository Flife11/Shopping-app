{{> header}}
<div class="mx-auto rounded" style="max-width: 60rem ">
    <div class="p-3 py-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="text-right">{{header}}</h4>
        </div>
        <div class="p-3 bg-white">
            <form action="{{posturl}}" enctype="multipart/form-data" method="post" name="new-product" id="new-product"
                class="mt-3">
                <input type="hidden" name="id" value="">
                {{#if nameCol}}
                <div class="col-md-12"><label class="p-2 labels font-weight-bold">{{nameCol}}</label>
                    <input name="name" id="name" type="text" class="form-control" placeholder="{{nameCol}}"
                        value="" required>
                </div>
                {{/if}}
                {{#if priceCol}}
                <div class="col-md-12"><label class="p-2 labels font-weight-bold">{{priceCol}}</label>
                    <input name="price" id="price" type="number" class="form-control" placeholder="{{priceCol}}"
                        value="" required>
                </div>
                {{/if}}
                {{#if quantityCol}}
                <div class="col-md-12"><label class="p-2 labels font-weight-bold">{{quantityCol}}</label>
                    <input name="quantity" id="quantity" type="number" class="form-control" placeholder="{{quantityCol}}"
                        value="" required>
                </div>
                {{/if}}                
                {{#if categories}}
                <div class="col-md-12"><label class="p-2 labels font-weight-bold">{{catnameCol}}</label>
                    <select required id="category" name="category" class="form-control form-field" placeholder="">
                        {{#each categories}}
                            <option value="{{this.id}}">{{this.name}}</option>
                        {{/each}}
                    </select>
                </div>
                {{#if subCatList}}
                <div id="subcategory-container" class="col-md-12"><label class="p-2 labels font-weight-bold">Loại sản phẩm con</label>
                    <select name="subcategory" id="subcategory" class="form-control form-field" placeholder="">
                        
                    </select>
                </div>
                {{/if}}
                {{/if}}
                {{#if imageCol}}
                <div class="col-md-12"><label class="p-2 labels font-weight-bold">{{imageCol}}</label>
                    <input name="image" id="image" type="file" class="form-control"
                        value="" required>
                </div>
                {{/if}}
                {{#if shortdesCol}}
                <div class="col-md-12"><label class="p-2 labels font-weight-bold">{{shortdesCol}}</label>
                    <textarea name="shortdes" class="form-control" maxlength="490" style="height:100px;"></textarea>
                </div>
                {{/if}}

                {{#if longdesCol}}
                <div class="col-md-12"><label class="p-2 labels font-weight-bold">{{longdesCol}}</label>
                    <textarea name="longdes" class="form-control" maxlength="2990" style="height:200px;"></textarea>
                </div>
                {{/if}}            
                <div style="width: 200px;" class="mx-auto d-flex justify-content-between mt-5 text-center">
                    <a href="{{cancelurl}}" id="create-button" class="btn btn-danger" type="submit">Hủy bỏ</a>
                    <button id="cancel-button" class="btn btn-primary" type="submit">Tạo</button>
                </div>
            </form>
        </div>
    </div> 
</div>
{{#if subCatList}}
{{#each subCatList as |sub|}}                        
    <select style="display: none;" id="sub-{{sub.cat.id}}" class="form-control form-field" placeholder="">
        {{#each sub.list as |s|}}
            <option value="{{s.id}}">{{s.name}}</option>
        {{/each}}
    </select>
{{/each}}
{{/if}}
<script>
    $(() => {
        let cat = $('#category').val();
        console.log(cat);
        $('#subcategory').html('');
        $('#subcategory-container').css({display: ''});
        $('#subcategory').html($(`#sub-${cat}`).html());

        $('#image').fileinput({'showUpload': false, "previewFileType": 'any', theme: 'fa6'});
    })
    $('#category').change(function() {
        let cat = $('#category').val();
        $('#subcategory').html('');
        $('#subcategory-container').css({display: ''});        
        $('#subcategory').html($(`#sub-${cat}`).html())
    });
        
</script>